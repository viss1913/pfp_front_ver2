# ТЗ: Интерфейс AI Конструктора (Панель Администратора)

Необходимо реализовать раздел **"AI Конструктор"** в админ-панели. Основная цель — дать администратору инструменты для настройки глобальной логики всех ботов.

## Стек и API
- **Документация**: `OPENAPI_SPEC.yaml` (секция `/admin/constructor/*`)
- **Базовый URL**: `/api/admin/constructor`

---

## 1. Раздел: Шаблоны CJM (Сценарии)
Интерфейс для настройки стадий диалога, которые будут доступны всем агентам по умолчанию.

**Функционал:**
- Список существующих шаблонов команд (Таблица/Карточки).
- Форма создания/редактирования шаблона:
    - **Команда**: например, `/start`, `/meeting`.
    - **Секция**: Группировка (Продажи, Поддержка).
    - **Классификатор (Текст)**: Инструкция для ИИ, когда переключаться на эту стадию.
    - **Ответ (Текст)**: Инструкция для ИИ, что именно отвечать на этой стадии.

---

## 2. Раздел: Мозг ИИ (Динамические контексты)
Управление глобальными знаниями и правилами этикета, которые подмешиваются в каждый запрос к ИИ.

**Функционал (CRUD):**
- Список контекстов с возможностью быстрого включения/выключения (`is_active`).
- Поля контекста:
    - **Заголовок**: для внутреннего использования.
    - **Контент (Textarea)**: Сами инструкции/знания для ИИ.
    - **Приоритет (Number)**: Чем выше число, тем выше блок в промпте.

---

## 3. Раздел: Мониторинг ботов
Обзор всех запущенных ботов в системе.

**Поля в таблице:**
- Название бота.
- Email агента (владельца).
- Статус (Активен/Неактивен).
- Дата создания.
- Кнопка "Логи" (переход к истории сообщений этого бота для отладки).

---

## 4. Раздел: Логи и Отладка
Просмотр того, как ИИ принимает решения.

**Данные из API:**
- Входящее сообщение пользователя.
- Какая команда была определена ИИ (Классификация).
- Ответ, который сгенерировал ИИ.
- Статус сессии.

---

## Рекомендации по UX
1. **Подсветка синтаксиса**: Для полей "Классификатор" и "Ответ" лучше использовать расширенные текстовые редакторы или простые текстовые поля с моноширинным шрифтом.
2. **Шаблоны**: Добавить возможность быстрого копирования текста из одного шаблона в другой.
3. **Статусы**: Визуально выделять неактивных ботов или контексты (например, серым цветом).
