Инструкции для Фронтенд-разработчика (Админка Конструктора)
Обновление изоляции проектов (Мультиарендность)
Для обеспечения корректной работы и изоляции данных между проектами, все запросы к API Конструктора должны теперь обязательно включать заголовки проекта.

Необходимые изменения:
Заголовки (Headers): Убедитесь, что все запросы к следующим эндпоинтам содержат заголовки проекта:

X-Project-Key: Апи-ключ текущего проекта.
X-Project-ID: ID текущего проекта.
Примечание: Если эти заголовки уже настроены глобально в axios instance, то дополнительных действий не требуется.

Затронутые эндпоинты:

GET /api/pfp/constructor/brain-contexts (и аналогичные POST, PUT, DELETE)
GET /api/pfp/constructor/commands (и аналогичные POST, PUT, DELETE)
GET /api/pfp/constructor/templates
GET /api/pfp/constructor/bots
Важное замечание по сохранению: При создании новых элементов (команд или контекстов мозга) бэкенд теперь автоматически привязывает их к project_id, извлеченному из ваших заголовков. Если заголовки отсутствуют, данные могут привязаться некорректно или запрос вернет ошибку.

Проверка:
Если при переключении между проектами в админке вы продолжаете видеть одни и те же контексты мозга — значит, фронтенд не передает X-Project-Key для этого конкретного эндпоинта.


Comment
Ctrl+Alt+M
